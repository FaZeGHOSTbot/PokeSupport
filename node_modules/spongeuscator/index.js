let obfuscate = (s) => {
    if (s.length < 4 || typeof s !== 'string') throw Error('Please use a String with 4 or more chars!');
    let arr = [];
    for (let i = 0; i < s.length; i++) {
        let done = arr.join('');
        if (i > 4) {
            let sliced = arr.slice(i - 3, i).join('');
            if (sliced === sliced.toLowerCase()) {
                    arr.push(s.charAt(i).toUpperCase())
            }
            else if (sliced === sliced.toUpperCase()) {
                    arr.push(s.charAt(i).toLowerCase())
            }
            else {
                arr.push(Math.round(Math.random()) ? s.charAt(i).toLowerCase() : s.charAt(i).toUpperCase())
            }
        }
        else {
            arr.push(Math.round(Math.random()) ? s.charAt(i).toLowerCase() : s.charAt(i).toUpperCase())
        }

    }
    return arr.join('');
};

module.exports = obfuscate;
